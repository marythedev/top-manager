<div id="landing-page">
  <div class="take-action">
    <img src="assets/landing-page-desktop.jpeg" alt="background" class="bg" />
    <div>
      <h1>Start managing your tasks and projects.</h1>
      <a href="/signup">
        <button class="action-button">Start with TopManager</button>
      </a>
    </div>
  </div>

  <!-- Overview -->
  <div class="overview">
    <div class="overview-text fade-in-up">
      <h1>TopManager</h1>
      <h2>Simple and effective task & project management.</h2>
      <p>
        TopManager helps you stay on top of tasks and deadlines with a clean,
        intuitive interface. Create projects, add tasks, set priorities — and
        track it all in one place.
      </p>
    </div>

    <div class="features fade-in-up">
      <h2>What you can do</h2>
      <br />
      <ul>
        <li><span>📝</span><strong>Create Tasks:</strong>
          Quick task creation with deadlines & priority levels.</li>
        <li><span>📁</span><strong>Manage Projects:</strong>
          Organize tasks under focused project boards.</li>
        <li><span>📬</span><strong>Request Features:</strong>
          Got an idea?
          <a href="/contact">Feel free to tell us</a>.</li>
      </ul>
    </div>
  </div>

  <hr class="section-divider" />

  <!-- Testimonials -->
  <div class="testimonials">
    <h2>What our users say</h2>
    <div class="testimonial-carousel">
      <div class="carousel-track">
        <div class="testimonial-card">
          "I love how easy it is to track my tasks. Highly recommend!"
          <span>— Sasha</span>
        </div>
        <div class="testimonial-card">
          "TopManager has transformed how we manage projects. It's minimalistic
          and powerful!"
          <span>— Denis</span>
        </div>
        <div class="testimonial-card">
          "TopManager has made my life so much easier. I can't imagine working
          without it!"
          <span>— Zehra</span>
        </div>
      </div>
    </div>
  </div>

  <hr class="section-divider" />

  <!-- Footer -->
  <footer class="footer">
    <p>Developed and designed by <a href="https://github.com/marythedev" target="_blank">Maria Dmitrenko</a></p>
    <p>© 2022–<span id="current-year"></span></p>
    <p><a href="/contact">Contact us</a></p>
  </footer>
</div>

<script>
  // Carousel logic
  const track = document.querySelector('.carousel-track');
  const cards = document.querySelectorAll('.testimonial-card');
  const leftArrow = document.querySelector('.carousel-arrow.left');
  const rightArrow = document.querySelector('.carousel-arrow.right');
  let index = 0;
  const totalCards = cards.length;
  const swipeThreshold = 30;
  let autoSwipeInterval;

  function updateCarousel() {
    if (index < 0)
      index = totalCards - 1;
    else if (index >= totalCards)
      index = 0;
    track.style.transform = `translateX(-${index * 100}%)`;
  }

  function startAutoSwipe() {
    autoSwipeInterval = setInterval(() => {
      index++;
      updateCarousel();
    }, 5000);
  }

  function restartAutoSwipe() {
    clearInterval(autoSwipeInterval);
    startAutoSwipe();
  }

  startAutoSwipe();

  // mobile swipe
  let startX = 0;
  let isDragging = false;

  track.addEventListener('touchstart', (e) => {
    startX = e.touches[0].clientX;
    isDragging = true;
    clearInterval(autoSwipeInterval);
  });

  track.addEventListener('touchmove', (e) => {
    if (!isDragging) return;
    let diffX = e.touches[0].clientX - startX;
    if (Math.abs(diffX) > 10) {
      e.preventDefault();
    }
  }, { passive: false });

  track.addEventListener('touchend', (e) => {
    if (!isDragging) return;
    isDragging = false;
    let endX = e.changedTouches[0].clientX;
    let diffX = endX - startX;

    if (Math.abs(diffX) > swipeThreshold) {
      if (diffX > 0) {
        index--;
      } else {
        index++;
      }
      updateCarousel();
    }
    startAutoSwipe();
  });

  //desktop swipe
  let isMouseDragging = false;
  let dragStartX = 0;

  track.addEventListener('mousedown', e => {
    isMouseDragging = true;
    dragStartX = e.pageX;
    clearInterval(autoSwipeInterval);
  });

  document.addEventListener('mouseup', e => {
    if (isMouseDragging) {
      isMouseDragging = false;
      const dragEndX = e.pageX;
      const dragDist = dragStartX - dragEndX;
      if (dragDist > 50) {
        index++;
        updateCarousel();
      } else if (dragDist < -50) {
        index--;
        updateCarousel();
      }
      startAutoSwipe();
    }
  });


  document.getElementById('current-year').textContent = new Date().getFullYear();

  // Feature animation on scroll
  const featureItems = document.querySelectorAll('.features li');

  function revealFeatures() {
    const scrollY = window.scrollY + window.innerHeight;
    featureItems.forEach((item, i) => {
      if (item.offsetTop < scrollY - 50) {
        setTimeout(() => item.classList.add('visible'), i * 150);
      }
    });
  }

  window.addEventListener('scroll', revealFeatures);
  window.addEventListener('load', revealFeatures);
</script>
